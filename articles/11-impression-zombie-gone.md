---
title: "X(æ—§ï¼šTwitter)ã«ç¾¤ãŒã‚‹ã‚¤ãƒ³ãƒ—ãƒ¬ã‚¾ãƒ³ãƒ“ã‚’ä¸€ç¶²æ‰“å°½ã«ã™ã‚‹æ‚ªé­”ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ãŸä»¶"
emoji: "ğŸ’€"
type: "idea" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Javascript, x, Twitter, Script]
published: true
---

## ã¯ã˜ã‚ã«

Xï¼ˆæ—§ï¼šTwitterï¼‰ã‚’ä½¿ã£ã¦ã„ã¦ã€ã“ã‚“ãªçµŒé¨“ã¯ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ

- ãƒˆãƒ¬ãƒ³ãƒ‰ã«ä¾¿ä¹—ã—ãŸæ„å‘³ä¸æ˜ãªãƒªãƒ—ãƒ©ã‚¤ã®åµ
- ã€Œ310ä¸‡å††å„²ã‘ã¾ã—ãŸğŸ’°ã€ç³»ã®æŠ•è³‡è©æ¬ºã‚¹ãƒ‘ãƒ 
- å…¨ãé–¢ä¿‚ãªã„é…ä¿¡å®£ä¼ã‚„ã‚²ãƒ¼ãƒ èª˜å°
- åŒã˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½•åº¦ã‚‚é€£æŠ•ã™ã‚‹ãƒªãƒ—ãƒ©ã‚¤ã‚¹ãƒ‘ãƒ 

ã“ã‚Œã‚‰ã®ã‚¤ãƒ³ãƒ—ãƒ¬ã‚¾ãƒ³ãƒ“ãŸã¡ã«æ—¥ã€…æ‚©ã¾ã•ã‚Œã€ã¤ã„ã«æˆ‘æ…¢ã®é™ç•Œã‚’è¶…ãˆãŸç§ãŒã€æ‚ªé­”ã®ã‚ˆã†ãªè‡ªå‹•ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é–‹ç™ºã—ã¾ã—ãŸã€‚

## é–‹ç™ºã®çµŒç·¯

### ãã£ã‹ã‘ï¼šé€£æŠ•ã‚¹ãƒ‘ãƒ ã®å¤šã•

æƒ…å ±åé›†ã™ã‚‹éš›ã€ä»¥ä¸‹ã®ã‚ˆã†ãªé€£æŠ•ãŒå¤šãã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãŒã‹ãªã‚Šæ±šæŸ“ã•ã‚Œã¦ã„ãã¾ã—ãŸï¼š

![image1](https://cdn.abacus.ai/images/a4ba1290-c3d8-4ffe-aa67-d08728a55d82.png)

### ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ãƒˆã™ã‚‹æ‰‹å£

æ™‚é–“ãŒçµŒã¤ã«ã¤ã‚Œã€ã‚¹ãƒ‘ãƒ ã®æ‰‹å£ã¯ã‚ˆã‚Šå·§å¦™ã«ãªã£ã¦ã„ãã¾ã—ãŸï¼š

1. æŠ•è³‡è©æ¬ºç³»ï¼šã€Œå €æ±Ÿæ°ã‚‚æ³¨ç›®ã€ã€Œ310ä¸‡å††å„²ã‘ã¾ã—ãŸã€
2. é…ä¿¡èª˜å°ç³»ï¼šã€ŒLet's streammmmã€ã€Œgoing liveã€
3. æš—å·é€šè²¨ç³»ï¼šã€ŒGalxe Leaderboardã€ã€Œquest completeã€
4. å½è£…æ—¥æœ¬äººï¼šå¤–å›½äººãŒæ—¥æœ¬äººã‚’è£…ã£ãŸæ€ªã—ã„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

![image2](https://cdn.abacus.ai/images/3ec28f58-8cfb-42f1-bc9d-bf80f1385778.png)

![image3](https://cdn.abacus.ai/images/f4df1497-43c1-4dc5-b72d-d7f985bac2af.png)

### æ‰‹å‹•ãƒ–ãƒ­ãƒƒã‚¯ã®é™ç•Œ

æ¯æ—¥æ•°åå€‹ã®ã‚¹ãƒ‘ãƒ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ‰‹å‹•ã§ãƒ–ãƒ­ãƒƒã‚¯ã™ã‚‹ã®ã¯ç¾å®Ÿçš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
ãã“ã§ã€**ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜ã«ã‚ˆã‚‹è‡ªå‹•ãƒ–ãƒ­ãƒƒã‚¯ã®ç™ºæƒ³**ã«è‡³ã‚Šã¾ã—ãŸã€‚

## ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ©Ÿèƒ½

### 1. é€£æŠ•ã‚¹ãƒ‘ãƒ æ¤œå‡º

åŒä¸€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒçŸ­æ™‚é–“ã§è¤‡æ•°å›ãƒªãƒ—ãƒ©ã‚¤ã—ãŸå ´åˆã€è‡ªå‹•çš„ã«ãƒ–ãƒ­ãƒƒã‚¯å¯¾è±¡ã¨ã—ã¦åˆ¤å®šã—ã¾ã™ã€‚

### 2. æŠ•è³‡è©æ¬ºæ¤œå‡º

ä»¥ä¸‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ¤œå‡ºï¼š

- å„²ã‘è©±ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆã€Œå„²ã‘ã¾ã—ãŸã€ã€Œåˆ©ç›Šã€ã€Œç¨¼ã’ãŸã€ï¼‰
- å…·ä½“çš„é‡‘é¡è¡¨ç¤ºï¼ˆã€Œ310ä¸‡å††ã€ã€Œâ—‹å„„å††ã€ï¼‰
- ä»–äººIDãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ + é‡‘é¡ã®çµ„ã¿åˆã‚ã›
- ã€Œå €æ±Ÿæ°ã‚‚æ³¨ç›®ã€ãªã©ã®è©ç§°ãƒ•ãƒ¬ãƒ¼ã‚º

### 3. ç„¡é–¢ä¿‚ãƒªãƒ—ãƒ©ã‚¤æ¤œå‡º

å…ƒãƒã‚¹ãƒˆã¨å…¨ãé–¢ä¿‚ãªã„å†…å®¹ã®ãƒªãƒ—ãƒ©ã‚¤ã‚’æ¤œå‡ºï¼š

- é…ä¿¡ãƒ»ã‚²ãƒ¼ãƒ å®£ä¼
- æš—å·é€šè²¨ãƒ»NFTé–¢é€£ã®å®£ä¼
- ç„¡é–¢ä¿‚ãªæŒ¨æ‹¶ã‚„å®šå‹æ–‡
- æ€ªã—ã„ãƒªãƒ³ã‚¯ã®æŠ•ç¨¿

### 4. è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

ãƒ–ãƒ­ãƒƒã‚¯æ™‚ã«ã¯è‰²åˆ†ã‘ã•ã‚ŒãŸé€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

- ğŸš« æŠ•è³‡è©æ¬º: ç´«è‰²
- ğŸš« ç„¡é–¢ä¿‚ãƒªãƒ—ãƒ©ã‚¤: é’è‰²
- ğŸš« é…ä¿¡å®£ä¼: ç´«è‰²
- ğŸš« æš—å·é€šè²¨å®£ä¼: ç·‘è‰²
- ğŸš« é€£æŠ•æ¤œå‡º: èµ¤è‰²

## å°å…¥æ–¹æ³•

### Step 1: Tampermonkeyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

- Chrome/Edge: [Chrome Web Store](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- Firefox: [Firefox Add-ons](https://addons.mozilla.org/ja/firefox/addon/tampermonkey/)ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### Step 2: ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è¿½åŠ 

1. Tampermonkeyã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã
2. ã€Œæ–°ã—ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ

:::details ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```javascript
// ==UserScript==
// @name         X Ultimate Anti-Spam Blocker
// @namespace    https://example.local
// @version      2.0.0
// @description  Auto-block all types of spam: replies, investment scams, irrelevant content
// @match        https://twitter.com/*
// @match        https://x.com/*
// @run-at       document-idle
// @grant        GM_setValue
// @grant        GM_getValue
// ==/UserScript==

(function () {
  "use strict";

  console.log("ğŸš€ Ultimate Anti-Spam Blocker Loading...");

  try {
    // åŸºæœ¬è¨­å®š
    const REPLY_SPAM_THRESHOLD = 3; // é€£æŠ•åˆ¤å®šã®é–¾å€¤
    const TIME_WINDOW_MS = 15 * 60 * 1000; // 15åˆ†é–“ã®ç›£è¦–çª“
    const AUTO_BLOCK = true; // è‡ªå‹•ãƒ–ãƒ­ãƒƒã‚¯æœ‰åŠ¹
    const DEBUG_MODE = false; // ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰

    // æ©Ÿèƒ½ON/OFF
    const INVESTMENT_SCAM_BLOCK = true; // æŠ•è³‡è©æ¬ºæ¤œå‡º
    const IRRELEVANT_REPLY_BLOCK = true; // ç„¡é–¢ä¿‚ãƒªãƒ—ãƒ©ã‚¤æ¤œå‡º

    // æŠ•è³‡è©æ¬ºæ¤œå‡ºãƒ‘ã‚¿ãƒ¼ãƒ³
    const INVESTMENT_SCAM_PATTERNS = {
      profitClaims: [
        "å„²ã‘ã¾ã—ãŸ",
        "åˆ©ç›Š",
        "ç¨¼ã’ãŸ",
        "ç¨¼ã„ã ",
        "å„²ã‹ã£ãŸ",
        "å„²ã‹ã‚‹",
        "ä¸‡å††å„²",
        "å„„å††å„²",
        "åƒä¸‡å††",
        "ç™¾ä¸‡å††",
        "åˆ©ç¢º",
        "çˆ†ç›Š",
        "è³‡ç”£",
        "æŠ•è³‡",
        "æ ª",
        "FX",
        "ä»®æƒ³é€šè²¨",
        "ãƒã‚¤ãƒŠãƒªãƒ¼",
        "å‰¯æ¥­",
        "ä¸åŠ´æ‰€å¾—",
        "é…å½“",
        "dividend",
        "profit",
        "earn",
        "made money",
        "earned",
        "investment",
        "trading",
        "crypto",
      ],
      moneyPatterns: [
        /\d+ä¸‡å††/g,
        /\d+å„„å††/g,
        /\d+åƒä¸‡å††/g,
        /\d+ç™¾ä¸‡å††/g,
        /\$\d+[KMB]?/g,
        /\d+[KMB]?\s*(USD|USDT|JPY|å††)/g,
        /\d{1,3}(,\d{3})*å††/g,
        /\d+\.\d+[KMB]?\s*(ä¸‡|å„„)/g,
      ],
      suspiciousMentions: [
        /@[a-zA-Z0-9_]+.*?(å„²|åˆ©ç›Š|ç¨¼|æŠ•è³‡|æ ª|FX)/,
        /@[a-zA-Z0-9_]+.*?\d+ä¸‡å††/,
        /å €æ±Ÿæ°ã‚‚æ³¨ç›®/,
        /æ¨å¥¨éŠ˜æŸ„/,
        /ã‚¹ãƒˆãƒƒãƒ—é«˜/,
        /æ³¨ç›®éŠ˜æŸ„/,
      ],
      scamPhrases: [
        "å €æ±Ÿæ°ã‚‚æ³¨ç›®",
        "æ¨å¥¨éŠ˜æŸ„ãŒæ¯æ—¥ã‚¹ãƒˆãƒƒãƒ—é«˜",
        "ã‚¹ãƒˆãƒƒãƒ—é«˜ç´š",
        "æ³¨ç›®éŠ˜æŸ„",
        "æ€¥é¨°éŠ˜æŸ„",
        "çˆ†ä¸Šã’",
        "æš´é¨°",
        "ä»•æ‰‹æ ª",
        "æƒ…å ±æ–™",
        "ä¼šå“¡é™å®š",
        "é™å®šæƒ…å ±",
        "å†…éƒ¨æƒ…å ±",
        "æ¥µç§˜æƒ…å ±",
        "å¿…å‹æ³•",
        "ç¢ºå®Ÿã«",
        "çµ¶å¯¾ã«",
        "100%",
        "ä¿è¨¼",
        "DM",
        "DMã§",
        "DMãã ã•ã„",
        "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",
        "profile",
        "link in bio",
        "ãƒªãƒ³ã‚¯",
        "URL",
        "ã‚µã‚¤ãƒˆ",
        "site",
      ],
    };

    // ç„¡é–¢ä¿‚ãƒªãƒ—ãƒ©ã‚¤æ¤œå‡ºãƒ‘ã‚¿ãƒ¼ãƒ³
    const IRRELEVANT_REPLY_PATTERNS = {
      streamingSpam: [
        "stream",
        "streaming",
        "streamm",
        "live",
        "going live",
        "watch me",
        "check out",
        "playing",
        "gaming",
        "game",
        "twitch",
        "youtube",
        "discord",
        "join me",
        "come watch",
        "ãƒ©ã‚¤ãƒ–",
        "é…ä¿¡",
        "ã‚²ãƒ¼ãƒ ",
        "è¦‹ã¦",
        "å‚åŠ ",
        "ãƒ—ãƒ¬ã‚¤",
      ],
      cryptoSpam: [
        "crypto",
        "nft",
        "blockchain",
        "defi",
        "web3",
        "metaverse",
        "galxe",
        "leaderboard",
        "quest",
        "airdrop",
        "mint",
        "drop",
        "whitelist",
        "presale",
        "token",
        "coin",
        "stardust",
        "constellation",
        "supernova",
        "galaxy",
        "explorer",
        "æš—å·é€šè²¨",
        "ã‚¨ã‚¢ãƒ‰ãƒ­",
        "ãƒŸãƒ³ãƒˆ",
        "ãƒˆãƒ¼ã‚¯ãƒ³",
      ],
      promotionPhrases: [
        "check this out",
        "look at this",
        "click here",
        "visit",
        "follow me",
        "subscribe",
        "like and",
        "share this",
        "don't miss",
        "limited time",
        "exclusive",
        "special offer",
        "free",
        "giveaway",
        "contest",
        "winner",
        "prize",
        "ãƒã‚§ãƒƒã‚¯",
        "ãƒ•ã‚©ãƒ­ãƒ¼",
        "è¦‹ã¦ã­",
        "é™å®š",
        "ç„¡æ–™",
        "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ",
      ],
      genericPhrases: [
        "good morning",
        "good night",
        "have a great day",
        "jumah mubarak",
        "morning routine",
        "daily routine",
        "wake up",
        "going to bed",
        "see you",
        "catch you later",
        "ãŠã¯ã‚ˆã†",
        "ãŠã‚„ã™ã¿",
        "ãŠç–²ã‚Œæ§˜",
        "ä»Šæ—¥ã‚‚",
        "æ¯æ—¥",
      ],
    };

    // å†…éƒ¨çŠ¶æ…‹ç®¡ç†
    const replyTracker = new Map();
    const blockedUsers = new Set();
    const processedReplies = new Set();

    function log(...args) {
      if (DEBUG_MODE)
        console.log("[ANTI-SPAM]", new Date().toLocaleTimeString(), ...args);
    }

    // æŠ•è³‡è©æ¬ºæ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯
    function detectInvestmentScam(text, userHandle) {
      if (!INVESTMENT_SCAM_BLOCK || !text)
        return { isScam: false, score: 0, reasons: [] };

      let scamScore = 0;
      let reasons = [];

      try {
        const lowerText = text.toLowerCase();

        // å„²ã‘è©±ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œå‡º
        const profitMatches = INVESTMENT_SCAM_PATTERNS.profitClaims.filter(
          (keyword) => lowerText.includes(keyword.toLowerCase())
        ).length;
        if (profitMatches > 0) {
          scamScore += profitMatches * 2;
          reasons.push(`å„²ã‘è©±(${profitMatches})`);
        }

        // é‡‘é¡ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º
        let moneyMatches = 0;
        INVESTMENT_SCAM_PATTERNS.moneyPatterns.forEach((pattern) => {
          const matches = text.match(pattern);
          if (matches) moneyMatches += matches.length;
        });
        if (moneyMatches > 0) {
          scamScore += moneyMatches * 3;
          reasons.push(`é‡‘é¡è¡¨ç¤º(${moneyMatches})`);
        }

        // æ€ªã—ã„ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³æ¤œå‡º
        const mentionMatches =
          INVESTMENT_SCAM_PATTERNS.suspiciousMentions.filter((pattern) =>
            pattern.test(text)
          ).length;
        if (mentionMatches > 0) {
          scamScore += mentionMatches * 4;
          reasons.push(`æ€ªã—ã„ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³(${mentionMatches})`);
        }

        // è©æ¬ºãƒ•ãƒ¬ãƒ¼ã‚ºæ¤œå‡º
        const scamPhraseMatches = INVESTMENT_SCAM_PATTERNS.scamPhrases.filter(
          (phrase) => lowerText.includes(phrase.toLowerCase())
        ).length;
        if (scamPhraseMatches > 0) {
          scamScore += scamPhraseMatches * 3;
          reasons.push(`è©æ¬ºãƒ•ãƒ¬ãƒ¼ã‚º(${scamPhraseMatches})`);
        }

        // ç‰¹å®šå±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³
        if (
          text.includes("@") &&
          (text.includes("ä¸‡å††") || text.includes("å„„å††"))
        ) {
          scamScore += 5;
          reasons.push("ä»–äººID+é‡‘é¡");
        }

        if (text.includes("å €æ±Ÿ") && text.includes("æ³¨ç›®")) {
          scamScore += 6;
          reasons.push("å €æ±Ÿæ°è©ç§°");
        }
      } catch (error) {
        log("Error in investment scam detection:", error);
      }

      return {
        isScam: scamScore >= 4,
        score: scamScore,
        reasons: [...new Set(reasons)],
      };
    }

    // ç„¡é–¢ä¿‚ãƒªãƒ—ãƒ©ã‚¤æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯
    function detectIrrelevantReply(text, userHandle) {
      if (!IRRELEVANT_REPLY_BLOCK || !text)
        return { isIrrelevant: false, score: 0, reasons: [] };

      let irrelevantScore = 0;
      let reasons = [];

      try {
        const lowerText = text.toLowerCase();

        // é…ä¿¡ãƒ»ã‚²ãƒ¼ãƒ å®£ä¼æ¤œå‡º
        const streamingMatches = IRRELEVANT_REPLY_PATTERNS.streamingSpam.filter(
          (keyword) => lowerText.includes(keyword.toLowerCase())
        ).length;
        if (streamingMatches > 0) {
          irrelevantScore += streamingMatches * 3;
          reasons.push(`é…ä¿¡å®£ä¼(${streamingMatches})`);
        }

        // æš—å·é€šè²¨ãƒ»NFTå®£ä¼æ¤œå‡º
        const cryptoMatches = IRRELEVANT_REPLY_PATTERNS.cryptoSpam.filter(
          (keyword) => lowerText.includes(keyword.toLowerCase())
        ).length;
        if (cryptoMatches > 0) {
          irrelevantScore += cryptoMatches * 3;
          reasons.push(`æš—å·é€šè²¨å®£ä¼(${cryptoMatches})`);
        }

        // å®£ä¼ãƒ»èª˜å°ãƒ•ãƒ¬ãƒ¼ã‚ºæ¤œå‡º
        const promotionMatches =
          IRRELEVANT_REPLY_PATTERNS.promotionPhrases.filter((phrase) =>
            lowerText.includes(phrase.toLowerCase())
          ).length;
        if (promotionMatches > 0) {
          irrelevantScore += promotionMatches * 2;
          reasons.push(`å®£ä¼ãƒ•ãƒ¬ãƒ¼ã‚º(${promotionMatches})`);
        }

        // ç„¡é–¢ä¿‚ãªæŒ¨æ‹¶ãƒ»å®šå‹æ–‡æ¤œå‡º
        const genericMatches = IRRELEVANT_REPLY_PATTERNS.genericPhrases.filter(
          (phrase) => lowerText.includes(phrase.toLowerCase())
        ).length;
        if (genericMatches > 0 && text.length < 100) {
          irrelevantScore += genericMatches * 2;
          reasons.push(`å®šå‹æ–‡(${genericMatches})`);
        }

        // ç‰¹å®šãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œå‡º
        if (
          lowerText.includes("let's stream") ||
          lowerText.includes("streamm")
        ) {
          irrelevantScore += 5;
          reasons.push("é…ä¿¡èª˜å°");
        }

        if (lowerText.includes("galxe") && lowerText.includes("leaderboard")) {
          irrelevantScore += 5;
          reasons.push("Galxeå®£ä¼");
        }
      } catch (error) {
        log("Error in irrelevant reply detection:", error);
      }

      return {
        isIrrelevant: irrelevantScore >= 5,
        score: irrelevantScore,
        reasons: [...new Set(reasons)],
      };
    }

    // DOMè¦ç´ å–å¾—é–¢æ•°
    function getTweetId(el) {
      try {
        const links = el.querySelectorAll('a[href*="/status/"]');
        for (const link of links) {
          const match = link.href.match(/\/status\/(\d+)/);
          if (match) return match[1];
        }
        return null;
      } catch (error) {
        return null;
      }
    }

    function getUserHandle(el) {
      try {
        const selectors = [
          'a[href^="/"][role="link"]:not([href*="/status/"])',
          'a[href^="/"]',
          '[data-testid="User-Name"] a',
        ];

        for (const selector of selectors) {
          const userLink = el.querySelector(selector);
          if (userLink && userLink.href) {
            const href = userLink.getAttribute("href");
            if (href && href.startsWith("/") && !href.includes("/status/")) {
              return href.replace("/", "");
            }
          }
        }
        return null;
      } catch (error) {
        return null;
      }
    }

    // ãƒ–ãƒ­ãƒƒã‚¯å®Ÿè¡Œé–¢æ•°
    async function blockUser(userHandle, tweetElement, reason) {
      if (blockedUsers.has(userHandle)) return;

      log(`ğŸš« BLOCKING: ${userHandle} - ${reason}`);

      try {
        const moreButton = tweetElement.querySelector(
          '[aria-label*="ã‚‚ã£ã¨è¦‹ã‚‹"], [aria-label*="More"], [data-testid="caret"]'
        );
        if (!moreButton) {
          showBlockNotification(
            userHandle,
            tweetElement,
            reason + " (UIéè¡¨ç¤ºã®ã¿)"
          );
          return false;
        }

        moreButton.click();
        await new Promise((r) => setTimeout(r, 500));

        const blockButton = Array.from(
          document.querySelectorAll('[role="menuitem"], [role="button"]')
        ).find((item) => {
          const text = item.textContent || "";
          return (
            (text.includes("ãƒ–ãƒ­ãƒƒã‚¯") || text.includes("Block")) &&
            !text.includes("ãƒ–ãƒ­ãƒƒã‚¯è§£é™¤") &&
            !text.includes("Unblock")
          );
        });

        if (!blockButton) {
          document.body.click();
          showBlockNotification(
            userHandle,
            tweetElement,
            reason + " (UIéè¡¨ç¤ºã®ã¿)"
          );
          return false;
        }

        blockButton.click();
        await new Promise((r) => setTimeout(r, 500));

        const confirmButton = Array.from(
          document.querySelectorAll('[role="button"]')
        ).find((btn) => {
          const text = btn.textContent || "";
          return (
            (text.includes("ãƒ–ãƒ­ãƒƒã‚¯") || text.includes("Block")) &&
            !text.includes("ã‚­ãƒ£ãƒ³ã‚»ãƒ«") &&
            !text.includes("Cancel")
          );
        });

        if (confirmButton) {
          confirmButton.click();
          blockedUsers.add(userHandle);
          showBlockNotification(userHandle, tweetElement, reason);
          return true;
        }
      } catch (error) {
        log("Error blocking user:", error);
      }

      showBlockNotification(userHandle, tweetElement, reason + " (ã‚¨ãƒ©ãƒ¼)");
      return false;
    }

    // é€šçŸ¥è¡¨ç¤ºé–¢æ•°
    function showBlockNotification(userHandle, element, reason) {
      const notification = document.createElement("div");
      notification.innerHTML = `
        <div style="font-weight: bold;">ğŸš« @${userHandle}</div>
        <div style="font-size: 12px; opacity: 0.8;">${reason}</div>
      `;

      let bgColor = "#e74c3c";
      if (reason.includes("æŠ•è³‡è©æ¬º")) bgColor = "#8e44ad";
      if (reason.includes("ç„¡é–¢ä¿‚")) bgColor = "#3498db";
      if (reason.includes("é…ä¿¡")) bgColor = "#9b59b6";
      if (reason.includes("æš—å·é€šè²¨")) bgColor = "#1abc9c";

      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, ${bgColor}, ${bgColor}dd);
        color: white;
        padding: 12px 16px;
        border-radius: 8px;
        font-size: 14px;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        max-width: 320px;
        border-left: 4px solid #fff;
      `;

      document.body.appendChild(notification);

      element.style.cssText += `
        opacity: 0.15 !important;
        filter: grayscale(1) blur(2px) !important;
        border: 2px solid ${bgColor} !important;
        position: relative;
      `;

      const badge = document.createElement("div");
      badge.textContent = "ğŸš« SPAM";
      badge.style.cssText = `
        position: absolute;
        top: 5px;
        right: 5px;
        background: ${bgColor};
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
        z-index: 1000;
      `;
      element.style.position = "relative";
      element.appendChild(badge);

      setTimeout(() => notification.remove(), 5000);
    }

    // é€£æŠ•è¿½è·¡é–¢æ•°
    function trackReply(parentTweetId, userHandle, timestamp) {
      if (!replyTracker.has(parentTweetId)) {
        replyTracker.set(parentTweetId, new Map());
      }

      const tweetReplies = replyTracker.get(parentTweetId);
      if (!tweetReplies.has(userHandle)) {
        tweetReplies.set(userHandle, []);
      }

      const userReplies = tweetReplies.get(userHandle);
      userReplies.push(timestamp);

      const cutoff = timestamp - TIME_WINDOW_MS;
      while (userReplies.length && userReplies[0] < cutoff) {
        userReplies.shift();
      }

      return userReplies.length;
    }

    // ãƒ¡ã‚¤ãƒ³å‡¦ç†é–¢æ•°
    async function processReply(replyElement) {
      try {
        const replyId = getTweetId(replyElement);
        if (!replyId || processedReplies.has(replyId)) return;

        processedReplies.add(replyId);

        const userHandle = getUserHandle(replyElement);
        if (!userHandle || blockedUsers.has(userHandle)) return;

        const tweetText = replyElement.textContent || "";

        // 1. æŠ•è³‡è©æ¬ºæ¤œå‡ºï¼ˆæœ€å„ªå…ˆï¼‰
        const investmentScamDetection = detectInvestmentScam(
          tweetText,
          userHandle
        );
        if (investmentScamDetection.isScam) {
          const scamReason = `æŠ•è³‡è©æ¬ºæ¤œå‡º (score: ${investmentScamDetection.score}, ç†ç”±: ${investmentScamDetection.reasons.join(", ")})`;
          await blockUser(userHandle, replyElement, scamReason);
          return;
        }

        // 2. ç„¡é–¢ä¿‚ãƒªãƒ—ãƒ©ã‚¤æ¤œå‡º
        const irrelevantDetection = detectIrrelevantReply(
          tweetText,
          userHandle
        );
        if (irrelevantDetection.isIrrelevant) {
          const irrelevantReason = `ç„¡é–¢ä¿‚ãƒªãƒ—ãƒ©ã‚¤æ¤œå‡º (score: ${irrelevantDetection.score}, ç†ç”±: ${irrelevantDetection.reasons.join(", ")})`;
          await blockUser(userHandle, replyElement, irrelevantReason);
          return;
        }

        // 3. é€šå¸¸ã®é€£æŠ•æ¤œå‡º
        const timestamp = Date.now();
        const replyCount = trackReply("general", userHandle, timestamp);

        if (replyCount >= REPLY_SPAM_THRESHOLD && AUTO_BLOCK) {
          const reason = `é€£æŠ•æ¤œå‡º (${replyCount}å›)`;
          await blockUser(userHandle, replyElement, reason);
        }
      } catch (error) {
        log("Error processing reply:", error);
      }
    }

    // DOMç›£è¦–è¨­å®š
    const observer = new MutationObserver((mutations) => {
      for (const mutation of mutations) {
        for (const node of mutation.addedNodes) {
          if (!(node instanceof HTMLElement)) continue;

          const tweets = node.matches?.('article[data-testid="tweet"]')
            ? [node]
            : node.querySelectorAll?.('article[data-testid="tweet"]') || [];

          tweets.forEach((tweet, index) => {
            setTimeout(() => {
              processReply(tweet).catch((err) =>
                log("Error processing tweet:", err)
              );
            }, 100 * index);
          });
        }
      }
    });

    observer.observe(document.documentElement, {
      childList: true,
      subtree: true,
    });

    // åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚ã®å‡¦ç†
    setTimeout(() => {
      document
        .querySelectorAll('article[data-testid="tweet"]')
        .forEach((tweet, index) => {
          setTimeout(() => {
            processReply(tweet).catch((err) =>
              log("Error processing initial tweet:", err)
            );
          }, 150 * index);
        });
    }, 2000);

    console.log("âœ… Ultimate Anti-Spam Blocker fully loaded!");
  } catch (error) {
    console.error("âŒ Fatal error loading script:", error);
  }
})();
```

:::

### Step 3: å‹•ä½œç¢ºèª

1. Ctrl+Sã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä¿å­˜
2. Xï¼ˆTwitterï¼‰ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
3. F12 â†’ Consoleã§ã€Œâœ… Ultimate Anti-Spam Blocker fully loaded!ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### æ¤œå‡ºæ„Ÿåº¦ã®èª¿æ•´

```javascript
// ã‚ˆã‚Šå³ã—ãæ¤œå‡ºã—ãŸã„å ´åˆ
const REPLY_SPAM_THRESHOLD = 2; // 2å›ã§é€£æŠ•åˆ¤å®š

// ã‚ˆã‚Šç·©ãæ¤œå‡ºã—ãŸã„å ´åˆ
const REPLY_SPAM_THRESHOLD = 5; // 5å›ã§é€£æŠ•åˆ¤å®š
```

### æ©Ÿèƒ½ã®å€‹åˆ¥ON/OFF

```javascript
const INVESTMENT_SCAM_BLOCK = false; // æŠ•è³‡è©æ¬ºæ¤œå‡ºã‚’ç„¡åŠ¹åŒ–
const IRRELEVANT_REPLY_BLOCK = false; // ç„¡é–¢ä¿‚ãƒªãƒ—ãƒ©ã‚¤æ¤œå‡ºã‚’ç„¡åŠ¹åŒ–
```

### ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰

```javascript
const DEBUG_MODE = true; // è©³ç´°ãƒ­ã‚°ã‚’å‡ºåŠ›
```

## æ³¨æ„äº‹é …

### èª¤æ¤œå‡ºã®å¯èƒ½æ€§

ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã«ã‚ˆã‚‹æ¤œå‡ºã®ãŸã‚ã€ç¨€ã«æ­£å¸¸ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’èª¤æ¤œå‡ºã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ°—ã«ãªã‚‹å ´åˆã¯æ¤œå‡ºæ„Ÿåº¦ã‚’ä¸‹ã’ã¦ãã ã•ã„ã€‚

### X(Twitter)ã®ä»•æ§˜å¤‰æ›´

X(Twitter)ã®DOMæ§‹é€ ãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå‹•ä½œã—ãªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

### åˆ©ç”¨ã¯è‡ªå·±è²¬ä»»ã§

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½¿ç”¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸå•é¡Œã«ã¤ã„ã¦ã€ä½œè€…ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚

## åŠ¹æœæ¸¬å®š

å®Ÿéš›ã«1é€±é–“ä½¿ç”¨ã—ãŸçµæœï¼š

- ãƒ–ãƒ­ãƒƒã‚¯ã—ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ•°: ç´„150ä»¶
- æŠ•è³‡è©æ¬ºæ¤œå‡º: ç´„60ä»¶ï¼ˆ40%ï¼‰
- ç„¡é–¢ä¿‚ãƒªãƒ—ãƒ©ã‚¤æ¤œå‡º: ç´„50ä»¶ï¼ˆ33%ï¼‰
- é€£æŠ•ã‚¹ãƒ‘ãƒ æ¤œå‡º: ç´„40ä»¶ï¼ˆ27%ï¼‰

ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®å¿«é©æ€§ãŒåŠ‡çš„ã«å‘ä¸Šã—ã¾ã—ãŸã€‚

## ã¾ã¨ã‚

ã‚¤ãƒ³ãƒ—ãƒ¬ã‚¾ãƒ³ãƒ“ã¨ã®æˆ¦ã„ã¯çµ‚ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—ã€ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚ã‚Œã°ã€å°‘ãªãã¨ã‚‚è‡ªåˆ†ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚’å¹³å’Œã«ä¿ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚

X(Twitter)ã‚’ã‚ˆã‚Šå¿«é©ã«ä½¿ã„ãŸã„æ–¹ã¯ã€ãœã²è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ãŸã ã—ã€**ä½¿ç”¨ã¯è‡ªå·±è²¬ä»»**ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚

## æœ€å¾Œã«

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯AIã«ææ¡ˆã—ãŸã†ãˆã§æ§‹ç¯‰ã—ã€æ©Ÿèƒ½ç¢ºèªã¯ç§ãŒè¡Œã„ã¾ã—ãŸã€‚
